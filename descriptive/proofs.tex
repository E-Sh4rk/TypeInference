\documentclass[a4paper]{article}

\usepackage{setup}

\hypersetup{pdfstartview=XYZ}%         zoom par defaut

\setlength{\droptitle}{-5em}   % This is your set screw
\title{\vspace{1.5cm}Descriptive type system}
\author{}
\date{\vspace{-5ex}}

\pagenumbering{gobble}

\theoremstyle{definition}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{definition}{Definition}
\newtheorem{property}{Property}
\newtheorem{corollary}{Corollary}

\begin{document}

  \maketitle
  
    \section{Definitions}

      \begin{definition}[Environment inclusion]
        Let $\Gamma$ and $\Gamma'$ two environments. We say that $\Gamma' \leq \Gamma$ iff:
        \begin{align*}
          &\forall e \in \dom \Gamma.\ \Gamma' \vdash e : \Gamma(e)
        \end{align*}
      \end{definition}
    
      \begin{definition}[Environment substitution]
        Let $\Gamma$ an environment and $\rho$ a substitution from variables to expressions.
        The environment $\Gamma\rho$ is defined by:
        \begin{align*}
          &\dom {\Gamma\rho} = \dom \Gamma \rho\\
          &\forall e \in \dom {\Gamma\rho}, (\Gamma\rho)(e) = \bigwedge_{\{e' \in \dom \Gamma \alt e'\rho\equiv e\}}\Gamma(e')
        \end{align*}
      \end{definition}
    
      \begin{definition}[Ordinary environments]
        We say that an environment $\Gamma$ is ordinary iff its domain only contains variables.
      \end{definition}

    \section{Theorems}

        \begin{property}[$\valsemantic \_$ properties]
          \begin{align*}
            &\forall s.\ \forall t.\ \valsemantic s \subseteq \valsemantic t \Leftrightarrow s \leq t\\
            &\valsemantic \Empty = \varnothing\\
            &\forall t.\ \valsemantic {\neg t} = \values \setminus \valsemantic t\\
            &\forall s.\ \forall t.\ \valsemantic {s\vee t} = \valsemantic s \cup \valsemantic t
          \end{align*}
        \end{property}
        Proof: theorem 5.5, lemmas 6.19, 6.22, 6.23 of semantic_subtyping [TODO: ref].

        \begin{lemma}[Alpha-renaming]
          Both the type system and the semantics are invariant by alpha-renaming.
        \end{lemma}
        Proof: quite straightforward.
        For the type system, it is a consequence of the fact that environments are up to alpha-renaming.
        For the semantics, it is a consequence of the fact that parallel substitutions (for the case of the $\texttt{if}$)
        are up to alpha-renaming.
    
        \begin{lemma}[Monotonicity]
          Let $\Gamma$ and $\Gamma'$ two environments such that $\Gamma' \leq \Gamma$.
          Then, we have:
          \begin{align*}
            \forall e,t.\ &\Gamma \vdash e:t \Rightarrow \Gamma' \vdash e:t\\
            \forall e,t,p,e',t'.\ &\Gamma \cvdash p e t e':t' \Rightarrow \Gamma' \cvdash p e t e':t'\\
            \forall e,t,p,\varpi,t'.\ &\pvdash \Gamma p e t \varpi:t' \Rightarrow \pvdash {\Gamma'} p e t \varpi:t'
          \end{align*}
        \end{lemma}

        \begin{corollary}[Relation order]
          The relation $\leq$ on environements is a preorder.
        \end{corollary}
    
        \begin{corollary}[Strengthening]
          If $\Gamma, (x:t_1^x) \vdash e:t_1$ and $\Gamma, (x:t_2^x) \vdash e:t_2$, then
          $\Gamma, (x:t_1^x \land t_2^x) \vdash e:t_1\land t_2$.
        \end{corollary}
        Proof: use the \Rule{Intersect} rule and the monotonicity lemma.

        \begin{lemma}
          Let $v$ a value and $\Gamma$ an environment such that $v$ is well-typed in $\Gamma$ (we can derive a type for $v$).
          Then, for any expression $e$, type $t$ and for any $p\in\{+,-\}$, we have:
          \[\forall t',\ \Gamma \vdash v:t' \Leftrightarrow \Gamma \cvdash p e t v:t'\]
          In other words, a test cannot strictly refine the type of a value.
        \end{lemma}

        \begin{lemma}[Substitution]
          Let $\Gamma$ an environment. Let $e$, $e_a$ and $e_b$ some expressions. Let $t$ a type.

          Let's suppose that $e_a \in \dom \Gamma$ and that $e_a$ has one of the following form:
          \begin{itemize}
            \item $x$ (variable)
            \item $v$ (value)
            \item $v v$ (value applied to a value)
          \end{itemize}
          Let's also suppose that $\Gamma \vdash e:t$ and $\forall t'.\ \Gamma \vdash e_a : t' \Rightarrow \Gamma\subst {e_a} {e_b} \vdash e_b:t'$.
          Then, we have:
          \begin{align*}
            &\Gamma \subst {e_a} {e_b} \vdash e \subst {e_a} {e_b}:t
          \end{align*}
        \end{lemma}

        \section{Proofs}

        \subsection{Monotonicity lemma}

        Let $\Gamma$ and $\Gamma'$ such that $\Gamma' \leq \Gamma$.

        We proceed by induction on the last rule of the typing derivation of the judgment (left-side of the implication).

        We proceed by case analysis:
        
        \begin{description}
          \item[\Rule{Occ}] We use the definition of $\Gamma' \leq \Gamma$.
          \item[TODO] 
        \end{description}

        \subsection{Substitution lemma}

        Let $\Gamma$, $e$, $e_a$, $e_b$ and $t$ as in the statement.

        We note $\rho$ the substitution $\subst {e_a} {e_b}$.

        We proceed by induction on the last rule of the derivation of the judgment $\Gamma \vdash e : t$.

        \begin{description}
          \item[\Rule{Occ}] If $e\in\dom\Gamma$, then we have $e\rho\in\dom\Gamma\rho$ and $(\Gamma\rho)(e\rho)\leq\Gamma(e)$.
          Thus we can easily derive $\Gamma\rho\vdash e\rho:t$ with the rule \Rule{Occ} and \Rule{Subst}.
          \item[\Rule{Intersect}] Trivial (by using the induction hypothesis).
          \item[\Rule{Subs}] Trivial (by using the induction hypothesis).
          \item[\Rule{Const}] Trivial.
          \item[\Rule{Abs}] Trivial (by using the induction hypothesis).
        \end{description}

\end{document}