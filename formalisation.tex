% Header
\documentclass[a4paper]{article}%      autres choix : book, report
\usepackage[utf8]{inputenc}%           gestion des accents (source)
\usepackage[T1]{fontenc}%              gestion des accents (PDF)
\usepackage[francais]{babel}%          gestion du français
\usepackage{textcomp}%                 caractères additionnels
\usepackage{mathtools,amssymb,amsthm}% packages de l'AMS + mathtools
\usepackage{lmodern}%                  police de caractère
\usepackage[top=2cm,left=2cm,right=2cm,bottom=2cm]{geometry}%     gestion des marges
\usepackage{graphicx}%                 gestion des images
\usepackage{array}%                    gestion améliorée des tableaux
\usepackage{calc}%                     syntaxe naturelle pour les calculs
\usepackage{titlesec}%                 pour les sections
\usepackage{titletoc}%                 pour la table des matières
\usepackage{fancyhdr}%                 pour les en-têtes
\usepackage{titling}%                  pour le titre
\usepackage{enumitem}%                 pour les listes numérotées
\usepackage{hyperref}%                 gestion des hyperliens
\usepackage{syntax}
\usepackage{minted}
\usepackage[parfill]{parskip}
\usemintedstyle{vs}

\hypersetup{pdfstartview=XYZ}%         zoom par défaut

\setlength{\droptitle}{-5em}   % This is your set screw
\title{\vspace{1.5cm}Type inference - M2 Internship}
\author{Mickaël LAURENT}
\date{\vspace{-5ex}}

\pagenumbering{gobble}
\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}

\begin{document}

	\maketitle

    \section{Typing}

    \subsection{Records}

    \begin{grammar}
        \let\syntleft\relax
        \let\syntright\relax
        <e> ::= <e>.field \alt \{field=<e>\} \alt <e>+<e>
    \end{grammar}

    $ \omega \in \{0,1,c_{field},a_{field},p_1,p_2\} $

    \begin{align*} 
        e.field \downarrow a_{field}\cdot\omega & = e \downarrow \omega\\
        \{field=e\} \downarrow c_{field}\cdot\omega & = e \downarrow \omega\\
        e_1 + e_2 \downarrow p_i \cdot \omega & = e_i \downarrow \omega
    \end{align*}

    \begin{align*}
        p_1^v(t) &= ?\\
        p_2^u(t) &= ?\\
        \text{proj}_{field}(t) &= \min\{u | t \leq \{field:u\}\}
    \end{align*}

    \begin{align*}
        t_{\Gamma,e,t}(\omega\cdot c_{field}) &= \text{proj}_{field}(t_{\Gamma,e,t}(\omega) \land \{field:Any\})\\
        t_{\Gamma,e,t}(\omega\cdot a_{field}) &= \{ field: t_{\Gamma,e,t}(\omega) \}\\
        t_{\Gamma,e,t}(\omega\cdot p_1) &=  p_1^{\text{typeof}_{\Gamma}(\omega\cdot p_2)}(t_{\Gamma,e,t}(\omega))\\
        t_{\Gamma,e,t}(\omega\cdot p_2) &=  p_2^{\text{typeof}_{\Gamma}(\omega\cdot p_1)}(t_{\Gamma,e,t}(\omega))
    \end{align*}

    Problem: $p_1^v$ and $p_2^u$. Even if computable, non interesting result: we need to know exactly fields in the right operand
    if we want a more interesting results!

    \subsection{Records (2nd try)}

    \begin{grammar}
        \let\syntleft\relax
        \let\syntright\relax
        <e> ::= <e>.field \alt \{\} \alt \{<e> with field=<e>\}
    \end{grammar}

    $ \omega \in \{0,1,a_{field},u_{field}^1,u_{field}^2\} $

    \begin{align*}
        \text{proj}_{field}(\bigvee\limits_{i \in I}
        (\bigwedge\limits_{p \in Pi} \{f_p:t_p\} \bigwedge\limits_{n \in Ni} \neg \{f_n:t_n\}))
        &= \bigvee\limits_{i \in I}
        (\bigwedge\limits_{\substack{p \in Pi \\ f_p = field}} t_p \bigwedge\limits_{\substack{n \in Ni \\ f_n = field}} \neg t_n)\\
        \text{forget}_{field}(\bigvee\limits_{i \in I}
        (\bigwedge\limits_{p \in Pi} \{f_p:t_p\} \bigwedge\limits_{n \in Ni} \neg \{f_n:t_n\}))
        &= \bigvee\limits_{i \in I}
        (\bigwedge\limits_{\substack{p \in Pi \\ f_p \neq field}} \{f_p:t_p\} \bigwedge\limits_{n \in Ni} \neg \{f_n:t_n\})\\
    \end{align*}

    \begin{align*}
        t_{\Gamma,e,t}(\omega\cdot a_{field}) &= \{ field: t_{\Gamma,e,t}(\omega) \}\\
        t_{\Gamma,e,t}(\omega\cdot u_{field}^1) &=  \text{forget}_{field}(t)\\
        t_{\Gamma,e,t}(\omega\cdot u_{field}^2) &=  \text{proj}_{field}(t)
    \end{align*}

\end{document}