Can't express relations between variables.
Could be possible by constraining not only subexpressions but every relevant subexpression in the domain of Gamma

if (x,y) is Int*Int | Bool*Bool
then
	if x is Int then y
	else 0
else 0

-----

Constr can give better results after 2 iterations (y: Int)

if (x,(x,y)) is (Int,(Int,Int)|(Bool,Bool)) then y else ...

-----

Adding reducible expressions (or even just non-variable expr) in the env
can loose precision sometimes

(here, typing is more precise without the second if)
if z is Int*Int | Bool*Bool
then
	if snd z is Int | Bool
	then
		if fst z is Int
		then snd z
		else 0
	else 0
else 0

(here typing is more precise without the first if)
if (x,y) is Any * Any
then
	if x is Int
	then
		fst (x,y)
	else 0
else 0

-----

The subject reduction is false in our system. It would be true if we kept only variables in the environnement.

if id 3 is Int then id 3 else 0
with id: Any->Any